<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Just a Moment</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:black;
  color:white;
  font-family:system-ui,sans-serif;
}

#bg{
  position:fixed;
  inset:0;
  background-size:cover;
  background-position:center;
  transition:opacity 1.2s;
  opacity:1;
  z-index:-2;
}

#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.55);
  z-index:-1;
}

#app{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:24px;
}

.text{
  font-size:22px;
  margin-bottom:16px;
  line-height:1.5;
}

.text.en{
  font-size:20px;
  opacity:0.85;
}

.timer{
  font-size:44px;
  margin-bottom:20px;
}

.buttons{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  width:100%;
  max-width:420px;
}

button,a{
  flex:1;
  padding:14px;
  font-size:15px;
  border:none;
  border-radius:10px;
  background:#2563eb;
  color:white;
  cursor:pointer;
  text-decoration:none;
}

.secondary{background:#374151;}
.info{background:#065f46;}
.warning{background:#7f1d1d;}
</style>
</head>

<body>

<div id="bg"></div>
<div id="overlay"></div>

<div id="app">
  <div class="text">×× ×‘× ×œ×š ×¡×™×’×¨×™×” â€” ×‘×•× × ×©×”×” ×¨×’×¢.</div>
  <button onclick="start()">×”×ª×—×œ</button>
</div>

<audio id="audio" src="ambient_brown_ok.wav" loop></audio>

<script>
/* ===== ×ª××•× ×•×ª ===== */
const images=[
 "bg1.png","bg2.png","bg3.png","bg4.png","bg5.png",
 "bg6.png","bg7.png","bg8.png","bg9.png","bg10.png","bg11.png"
];

const bg=document.getElementById("bg");

function changeImage(){
  const img=images[Math.floor(Math.random()*images.length)];
  bg.style.backgroundImage=`url('${img}')`;
}
changeImage();
setInterval(changeImage,15000);

/* ===== ××•×“×™×• ===== */
const audio=document.getElementById("audio");
audio.volume=0.6;
let muted=false;

/* ===== ×˜×§×¡×˜×™× ===== */
const heTexts=[
 "××™×Ÿ ×¦×•×¨×š ×œ××”×¨.",
 "×¢×•×“ ×¨×’×¢ ×©×œ ×©×§×˜.",
 "×”×“×—×£ ×™×“×¢ ×œ×”×™×¨×’×¢.",
 "××¤×©×¨ ×¤×©×•×˜ ×œ×”×™×•×ª ×›××Ÿ.",
 "×–×” ×™×¢×‘×•×¨ ×’× ×‘×œ×™ ×¤×¢×•×œ×”."
];

const enTexts=[
 "Just stay with the moment.",
 "You donâ€™t need to decide now.",
 "This feeling will pass."
];

let currentText="";
let currentLang="he";

function randomText(){
  const useHebrew=Math.random()<0.7;
  const arr=useHebrew?heTexts:enTexts;
  let t;
  do{
    t=arr[Math.floor(Math.random()*arr.length)];
  }while(t===currentText);
  currentText=t;
  currentLang=useHebrew?"he":"en";
  return t;
}

/* ===== ×˜×™×™××¨ ===== */
let remaining=600;
let timer,textTimer,paused=false;
const app=document.getElementById("app");

function start(){
  audio.play().catch(()=>{});
  render(true);

  timer=setInterval(()=>{
    if(paused) return;
    remaining--;
    render(false);
  },1000);

  textTimer=setInterval(()=>{
    if(!paused) render(true);
  },8000);
}

function render(changeText){
  const m=String(Math.floor(remaining/60)).padStart(2,"0");
  const s=String(remaining%60).padStart(2,"0");
  const txt=changeText?randomText():currentText;

  app.innerHTML=`
    <div class="text ${currentLang==='en'?'en':''}">${txt}</div>
    <div class="timer">${m}:${s}</div>

    <div class="buttons">
      <button class="secondary" onclick="render(true)">â­ï¸ ×“×œ×’</button>
      <button class="secondary" onclick="paused=!paused">${paused?"â–¶ï¸ ×”××©×š":"â¸ï¸ ×”×©×”×”"}</button>
      <button class="secondary" onclick="audio.muted=!audio.muted">${audio.muted?"ğŸ”Š ×¡××•× ×“":"ğŸ”‡ ×”×©×ª×§"}</button>
    </div>

    <div class="buttons" style="margin-top:12px">
      <a class="info" href="https://www.health.gov.il/Subjects/Smoke/Pages/default.aspx" target="_blank">
        ×˜×™×¤×™× ×œ×”×¤×¡×§×ª ×¢×™×©×•×Ÿ
      </a>
      <a class="warning"
         href="https://www.cancer.gov/about-cancer/causes-prevention/risk/tobacco"
         target="_blank"
         onclick="return confirm('×”×ª×•×›×Ÿ ×›×•×œ×œ ×ª××•× ×•×ª ×§×©×•×ª. ×œ×”××©×™×š?');">
        ××–×”×¨×•×ª â€“ ×¡×¨×˜×Ÿ ×¨×™××•×ª
      </a>
    </div>
  `;
}
</script>

</body>
</html>

