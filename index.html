<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Just a Moment</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  font-family:system-ui,sans-serif;
  color:white;
}

/* ===== רקע מתחלף ===== */
body{
  background-size:cover;
  background-position:center;
  animation:bgSlide 66s infinite;
}

@keyframes bgSlide{
  0%   { background-image:url('./bg1.png'); }
  10%  { background-image:url('./bg2.png'); }
  20%  { background-image:url('./bg3.png'); }
  30%  { background-image:url('./bg4.png'); }
  40%  { background-image:url('./bg5.png'); }
  50%  { background-image:url('./bg6.png'); }
  60%  { background-image:url('./bg7.png'); }
  70%  { background-image:url('./bg8.png'); }
  80%  { background-image:url('./bg9.png'); }
  90%  { background-image:url('./bg10.png'); }
  100% { background-image:url('./bg11.png'); }
}

#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.25);
}

#app{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:24px;
}

.text{
  font-size:22px;
  margin-bottom:14px;
}

.timer{
  font-size:48px;
  margin-bottom:20px;
}

.block{
  width:100%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

button,a{
  padding:16px;
  border-radius:14px;
  border:none;
  font-size:16px;
  text-align:center;
  background:#374151;
  color:white;
  text-decoration:none;
}

.primary{background:#2563eb;}
.success{background:#065f46;}

</style>
</head>

<body>

<div id="overlay"></div>

<div id="app">

  <div id="message" class="text">
    אם בא לך סיגריה — בוא נשהה רגע.
  </div>

  <div id="timer" class="timer">10:00</div>

  <div class="block">
    <button class="primary" onclick="start()">התחל</button>
    <button onclick="nextText()">דלג</button>
  </div>

  <div class="block" style="margin-top:20px">
    <a class="success"
       href="https://he.wikipedia.org/wiki/הפסקת_עישון"
       target="_blank" rel="noopener">
       עזרה להפסקת עישון
    </a>

    <a
       href="https://www.youtube.com/watch?v=gukm--w36PI"
       target="_blank" rel="noopener">
       וידאו – התמודדות עם דחף
    </a>
  </div>

</div>

<audio id="audio" preload="auto">
  <source src="./ambient_brown_ok.wav" type="audio/wav">
</audio>

<script>
/* ===== טקסטים ===== */
const texts = [
  {t:"אין צורך למהר.", d:"rtl"},
  {t:"עוד רגע של שקט.", d:"rtl"},
  {t:"הדחף ידע להירגע.", d:"rtl"},
  {t:"אפשר פשוט להיות כאן.", d:"rtl"},
  {t:"זה יעבור גם בלי פעולה.", d:"rtl"},

  {t:"Just stay with the moment.", d:"ltr"},
  {t:"You don’t need to decide now.", d:"ltr"},
  {t:"This feeling will pass.", d:"ltr"}
];

let remaining = 600;
let timerInt = null;

const msg = document.getElementById("message");
const timerEl = document.getElementById("timer");
const audio = document.getElementById("audio");

function updateTimer(){
  const m = String(Math.floor(remaining/60)).padStart(2,"0");
  const s = String(remaining%60).padStart(2,"0");
  timerEl.innerText = `${m}:${s}`;
}

function start(){
  if(timerInt) return;

  audio.volume = 0.6;
  audio.play().catch(()=>{});

  timerInt = setInterval(()=>{
    remaining--;
    updateTimer();
    if(remaining<=0) clearInterval(timerInt);
  },1000);
}

function nextText(){
  const r = texts[Math.floor(Math.random()*texts.length)];
  msg.innerText = r.t;
  msg.style.direction = r.d;
}

updateTimer();
nextText();
</script>

</body>
</html>
