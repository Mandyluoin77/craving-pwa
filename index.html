<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Just a Moment</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  font-family:system-ui,sans-serif;
  color:white;
}

body{
  background:url('./bg1.png') center/cover no-repeat fixed;
}

#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.25);
}

#app{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:24px;
  text-align:center;
}

.timer{
  font-size:48px;
  margin-bottom:12px;
}

.text{
  font-size:22px;
  margin-bottom:16px;
}

.block{
  width:100%;
  max-width:420px;
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:16px;
}

button,input,a{
  padding:16px;
  border-radius:14px;
  border:none;
  font-size:16px;
  text-align:center;
  text-decoration:none;
}

button{background:#374151;color:white;cursor:pointer;}
.primary{background:#2563eb;}
.success{background:#065f46;color:white;}

input{
  background:#1f2933;
  color:white;
}

.result{
  font-size:18px;
  margin-top:8px;
}
</style>
</head>

<body>

<div id="overlay"></div>

<div id="app">

  <div id="message" class="text">×× ×‘× ×œ×š ×¡×™×’×¨×™×” â€” ×‘×•× × ×©×”×” ×¨×’×¢.</div>
  <div id="timer" class="timer">10:00</div>

  <div class="block">
    <button class="primary" onclick="start()">×”×ª×—×œ</button>
    <button onclick="nextText()">×“×œ×’</button>
  </div>

  <div class="block">
    <input id="cigsPerDay" type="number" placeholder="×¡×™×’×¨×™×•×ª ×‘×™×•×">
    <input id="packPrice" type="number" placeholder="××—×™×¨ ×—×¤×™×¡×” (â‚ª)">
    <button onclick="calcSavings()">×—×©×‘ ×—×™×¡×›×•×Ÿ</button>
    <div id="calcResult" class="result"></div>
  </div>

  <div class="block">
    <a class="success"
       href="https://he.wikipedia.org/wiki/×”×¤×¡×§×ª_×¢×™×©×•×Ÿ"
       target="_blank" rel="noopener">
       ×¢×–×¨×” ×œ×”×¤×¡×§×ª ×¢×™×©×•×Ÿ
    </a>

    <a
       href="https://www.youtube.com/watch?v=gukm--w36PI"
       target="_blank" rel="noopener">
       ×•×™×“××• â€“ ×”×ª××•×“×“×•×ª ×¢× ×“×—×£
    </a>
  </div>

</div>

<audio id="audio">
  <source src="./ambient_brown_ok.wav" type="audio/wav">
</audio>

<script>
// ===== ×˜×§×¡×˜×™× ×¨×‘-×œ×©×•× ×™×™× =====
const texts = [
  {text:"××™×Ÿ ×¦×•×¨×š ×œ××”×¨.", lang:"he"},
  {text:"×¢×•×“ ×¨×’×¢ ×©×œ ×©×§×˜.", lang:"he"},
  {text:"×”×“×—×£ ×™×“×¢ ×œ×”×™×¨×’×¢.", lang:"he"},
  {text:"××¤×©×¨ ×¤×©×•×˜ ×œ×”×™×•×ª ×›××Ÿ.", lang:"he"},
  {text:"×–×” ×™×¢×‘×•×¨ ×’× ×‘×œ×™ ×¤×¢×•×œ×”.", lang:"he"},

  {text:"Just stay with the moment.", lang:"en"},
  {text:"You donâ€™t need to decide now.", lang:"en"},
  {text:"This feeling will pass.", lang:"en"},
  {text:"Breathe. Nothing else is required.", lang:"en"}
];

// ===== ××¦×‘ =====
let remaining = 600; // 10 ×“×§×•×ª
let timerInterval = null;
let startTime = null;

const message = document.getElementById("message");
const timerEl = document.getElementById("timer");
const audio = document.getElementById("audio");

// ===== ×˜×™×™××¨ =====
function updateTimer(){
  const m = String(Math.floor(remaining/60)).padStart(2,"0");
  const s = String(remaining%60).padStart(2,"0");
  timerEl.innerText = `${m}:${s}`;
}

function start(){
  if(timerInterval) return;

  startTime = Date.now();
  audio.volume = 0.6;
  audio.play().catch(()=>{});

  timerInterval = setInterval(()=>{
    remaining--;
    updateTimer();
    if(remaining<=0) clearInterval(timerInterval);
  },1000);
}

// ===== ×˜×§×¡×˜ =====
function nextText(){
  const item = texts[Math.floor(Math.random()*texts.length)];
  message.innerText = item.text;
  message.style.direction = item.lang === "en" ? "ltr" : "rtl";
}

// ===== ××—×©×‘×•×Ÿ =====
function calcSavings(){
  const cigs = Number(document.getElementById("cigsPerDay").value);
  const price = Number(document.getElementById("packPrice").value);
  const result = document.getElementById("calcResult");

  if(!cigs || !price || !startTime){
    result.innerText = "× × ×œ×”×–×™×Ÿ × ×ª×•× ×™× ×•×œ×”×ª×—×™×œ.";
    return;
  }

  const minutes = (Date.now() - startTime) / 60000;
  const cigsPerMin = cigs / 1440;
  const pricePerCig = price / 20;

  const avoided = minutes * cigsPerMin;
  const savedNow = avoided * pricePerCig;
  const savedDay = cigs * pricePerCig;
  const savedMonth = savedDay * 30;

  result.innerText =
    `ğŸš­ ×¢×“ ×¢×›×©×™×•: ${avoided.toFixed(2)} ×¡×™×’×¨×™×•×ª\n` +
    `ğŸ’° × ×—×¡×›×• â‚ª${savedNow.toFixed(2)}\n` +
    `ğŸ“… ×‘×™×•×: â‚ª${savedDay.toFixed(2)} | ğŸ“† ×‘×—×•×“×©: â‚ª${savedMonth.toFixed(0)}`;
}

updateTimer();
nextText();
</script>

</body>
</html>
